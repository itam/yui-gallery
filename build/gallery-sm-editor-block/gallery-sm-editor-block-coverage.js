if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-sm-editor-block/gallery-sm-editor-block.js']) {
   __coverage__['build/gallery-sm-editor-block/gallery-sm-editor-block.js'] = {"path":"build/gallery-sm-editor-block/gallery-sm-editor-block.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":35},"end":{"line":1,"column":54}}},"2":{"name":"(anonymous_2)","line":26,"loc":{"start":{"line":26,"column":1},"end":{"line":26,"column":13}}},"3":{"name":"(anonymous_3)","line":94,"loc":{"start":{"line":94,"column":17},"end":{"line":94,"column":29}}},"4":{"name":"(anonymous_4)","line":111,"loc":{"start":{"line":111,"column":16},"end":{"line":111,"column":28}}},"5":{"name":"(anonymous_5)","line":124,"loc":{"start":{"line":124,"column":24},"end":{"line":124,"column":36}}},"6":{"name":"(anonymous_6)","line":141,"loc":{"start":{"line":141,"column":24},"end":{"line":141,"column":36}}},"7":{"name":"(anonymous_7)","line":157,"loc":{"start":{"line":157,"column":18},"end":{"line":157,"column":33}}},"8":{"name":"(anonymous_8)","line":167,"loc":{"start":{"line":167,"column":55},"end":{"line":167,"column":71}}},"9":{"name":"(anonymous_9)","line":213,"loc":{"start":{"line":213,"column":19},"end":{"line":213,"column":31}}},"10":{"name":"(anonymous_10)","line":267,"loc":{"start":{"line":267,"column":24},"end":{"line":267,"column":35}}},"11":{"name":"(anonymous_11)","line":282,"loc":{"start":{"line":282,"column":17},"end":{"line":282,"column":44}}},"12":{"name":"(anonymous_12)","line":317,"loc":{"start":{"line":317,"column":29},"end":{"line":317,"column":42}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":347,"column":3}},"2":{"start":{"line":26,"column":0},"end":{"line":335,"column":5}},"3":{"start":{"line":28,"column":0},"end":{"line":28,"column":24}},"4":{"start":{"line":30,"column":0},"end":{"line":331,"column":3}},"5":{"start":{"line":95,"column":8},"end":{"line":95,"column":67}},"6":{"start":{"line":97,"column":8},"end":{"line":101,"column":9}},"7":{"start":{"line":98,"column":12},"end":{"line":98,"column":55}},"8":{"start":{"line":100,"column":12},"end":{"line":100,"column":48}},"9":{"start":{"line":103,"column":8},"end":{"line":105,"column":9}},"10":{"start":{"line":104,"column":12},"end":{"line":104,"column":80}},"11":{"start":{"line":107,"column":8},"end":{"line":107,"column":34}},"12":{"start":{"line":112,"column":8},"end":{"line":112,"column":34}},"13":{"start":{"line":125,"column":8},"end":{"line":127,"column":9}},"14":{"start":{"line":126,"column":12},"end":{"line":126,"column":19}},"15":{"start":{"line":129,"column":8},"end":{"line":131,"column":10}},"16":{"start":{"line":142,"column":8},"end":{"line":145,"column":9}},"17":{"start":{"line":143,"column":12},"end":{"line":143,"column":58}},"18":{"start":{"line":144,"column":12},"end":{"line":144,"column":37}},"19":{"start":{"line":158,"column":8},"end":{"line":158,"column":39}},"20":{"start":{"line":160,"column":8},"end":{"line":189,"column":9}},"21":{"start":{"line":161,"column":12},"end":{"line":161,"column":34}},"22":{"start":{"line":163,"column":12},"end":{"line":165,"column":27}},"23":{"start":{"line":167,"column":12},"end":{"line":180,"column":21}},"24":{"start":{"line":168,"column":16},"end":{"line":168,"column":49}},"25":{"start":{"line":170,"column":16},"end":{"line":170,"column":55}},"26":{"start":{"line":172,"column":16},"end":{"line":175,"column":19}},"27":{"start":{"line":177,"column":16},"end":{"line":177,"column":51}},"28":{"start":{"line":179,"column":16},"end":{"line":179,"column":36}},"29":{"start":{"line":183,"column":12},"end":{"line":183,"column":38}},"30":{"start":{"line":184,"column":12},"end":{"line":184,"column":47}},"31":{"start":{"line":186,"column":12},"end":{"line":186,"column":53}},"32":{"start":{"line":188,"column":12},"end":{"line":188,"column":36}},"33":{"start":{"line":214,"column":8},"end":{"line":216,"column":40}},"34":{"start":{"line":218,"column":8},"end":{"line":218,"column":31}},"35":{"start":{"line":222,"column":8},"end":{"line":222,"column":62}},"36":{"start":{"line":227,"column":8},"end":{"line":229,"column":9}},"37":{"start":{"line":228,"column":12},"end":{"line":228,"column":55}},"38":{"start":{"line":231,"column":8},"end":{"line":231,"column":38}},"39":{"start":{"line":232,"column":8},"end":{"line":232,"column":87}},"40":{"start":{"line":233,"column":8},"end":{"line":233,"column":70}},"41":{"start":{"line":235,"column":8},"end":{"line":246,"column":9}},"42":{"start":{"line":238,"column":12},"end":{"line":238,"column":73}},"43":{"start":{"line":239,"column":15},"end":{"line":246,"column":9}},"44":{"start":{"line":242,"column":12},"end":{"line":242,"column":60}},"45":{"start":{"line":245,"column":12},"end":{"line":245,"column":60}},"46":{"start":{"line":250,"column":8},"end":{"line":252,"column":9}},"47":{"start":{"line":251,"column":12},"end":{"line":251,"column":34}},"48":{"start":{"line":254,"column":8},"end":{"line":254,"column":66}},"49":{"start":{"line":256,"column":8},"end":{"line":256,"column":32}},"50":{"start":{"line":268,"column":8},"end":{"line":268,"column":70}},"51":{"start":{"line":283,"column":8},"end":{"line":283,"column":31}},"52":{"start":{"line":285,"column":8},"end":{"line":285,"column":34}},"53":{"start":{"line":286,"column":8},"end":{"line":286,"column":38}},"54":{"start":{"line":288,"column":8},"end":{"line":291,"column":9}},"55":{"start":{"line":289,"column":12},"end":{"line":289,"column":55}},"56":{"start":{"line":290,"column":12},"end":{"line":290,"column":50}},"57":{"start":{"line":293,"column":8},"end":{"line":296,"column":9}},"58":{"start":{"line":294,"column":12},"end":{"line":294,"column":55}},"59":{"start":{"line":295,"column":12},"end":{"line":295,"column":50}},"60":{"start":{"line":298,"column":8},"end":{"line":300,"column":9}},"61":{"start":{"line":299,"column":12},"end":{"line":299,"column":66}},"62":{"start":{"line":302,"column":8},"end":{"line":302,"column":25}},"63":{"start":{"line":318,"column":8},"end":{"line":319,"column":22}},"64":{"start":{"line":321,"column":8},"end":{"line":323,"column":9}},"65":{"start":{"line":322,"column":12},"end":{"line":322,"column":19}},"66":{"start":{"line":325,"column":8},"end":{"line":325,"column":38}},"67":{"start":{"line":327,"column":8},"end":{"line":329,"column":9}},"68":{"start":{"line":328,"column":12},"end":{"line":328,"column":82}},"69":{"start":{"line":333,"column":0},"end":{"line":333,"column":42}}},"branchMap":{"1":{"line":97,"type":"if","locations":[{"start":{"line":97,"column":8},"end":{"line":97,"column":8}},{"start":{"line":97,"column":8},"end":{"line":97,"column":8}}]},"2":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":8},"end":{"line":103,"column":8}},{"start":{"line":103,"column":8},"end":{"line":103,"column":8}}]},"3":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":8},"end":{"line":125,"column":8}},{"start":{"line":125,"column":8},"end":{"line":125,"column":8}}]},"4":{"line":142,"type":"if","locations":[{"start":{"line":142,"column":8},"end":{"line":142,"column":8}},{"start":{"line":142,"column":8},"end":{"line":142,"column":8}}]},"5":{"line":160,"type":"if","locations":[{"start":{"line":160,"column":8},"end":{"line":160,"column":8}},{"start":{"line":160,"column":8},"end":{"line":160,"column":8}}]},"6":{"line":227,"type":"if","locations":[{"start":{"line":227,"column":8},"end":{"line":227,"column":8}},{"start":{"line":227,"column":8},"end":{"line":227,"column":8}}]},"7":{"line":235,"type":"if","locations":[{"start":{"line":235,"column":8},"end":{"line":235,"column":8}},{"start":{"line":235,"column":8},"end":{"line":235,"column":8}}]},"8":{"line":239,"type":"if","locations":[{"start":{"line":239,"column":15},"end":{"line":239,"column":15}},{"start":{"line":239,"column":15},"end":{"line":239,"column":15}}]},"9":{"line":250,"type":"if","locations":[{"start":{"line":250,"column":8},"end":{"line":250,"column":8}},{"start":{"line":250,"column":8},"end":{"line":250,"column":8}}]},"10":{"line":293,"type":"if","locations":[{"start":{"line":293,"column":8},"end":{"line":293,"column":8}},{"start":{"line":293,"column":8},"end":{"line":293,"column":8}}]},"11":{"line":298,"type":"if","locations":[{"start":{"line":298,"column":8},"end":{"line":298,"column":8}},{"start":{"line":298,"column":8},"end":{"line":298,"column":8}}]},"12":{"line":321,"type":"if","locations":[{"start":{"line":321,"column":8},"end":{"line":321,"column":8}},{"start":{"line":321,"column":8},"end":{"line":321,"column":8}}]},"13":{"line":321,"type":"binary-expr","locations":[{"start":{"line":321,"column":12},"end":{"line":321,"column":18}},{"start":{"line":321,"column":22},"end":{"line":321,"column":42}}]},"14":{"line":327,"type":"if","locations":[{"start":{"line":327,"column":8},"end":{"line":327,"column":8}},{"start":{"line":327,"column":8},"end":{"line":327,"column":8}}]}},"code":["(function () { YUI.add('gallery-sm-editor-block', function (Y, NAME) {","","/*jshint expr:true, onevar:false */","","/**","Provides the `Editor.Block` extension.","","@module gallery-sm-editor","@submodule gallery-sm-editor-block","**/","","/**","Extension for `Editor.Base` that handles block element formatting","","Provides support for the following commands:","","- formatBlock","- heading","- insertParagraph","","@class Editor.Block","@extends Base","@extensionfor Editor.Base","**/","","(function () {","","var EDOM = Y.Editor.DOM;","","var EditorBlock = Y.Base.create('editorBlock', Y.Base, [], {","    // -- Public Properties ----------------------------------------------------","","    /**","    Hash of block commands supported by this editor.","","    Names should correspond with valid `execCommand()` command names. Values","    are properties in the following format:","","    @property {Object} blockCommands","        @param {Function|String} commandFn","        @param {Function|String} [queryFn]","    **/","    blockCommands: {","        formatBlock: {","            commandFn: '_formatBlock',","            queryFn: '_queryBlockCommand'","        },","","        heading: {","            commandFn: '_formatBlock',","            queryFn: '_queryBlockCommand'","        },","","        insertBreak: {","            commandFn: '_noCommand'","        },","","        insertParagraph: {","            commandFn: '_insertReturn',","            queryFn: '_queryBlockCommand'","        }","    },","","","    /**","    Key commands related to block functionality.","","    @property {Object} styleKeyCommands","    **/","    blockKeyCommands: {","        'alt+c':       'justifyCenter',","        'alt+f':       'justifyFull',","        'alt+l':       'justifyLeft',","        'alt+r':       'justifyRight',","        'enter':       'insertParagraph',","        // ctrl+enter for safari, shift+enter for sane browsers. safe to have","        // both declarations here because they pass through to default behavior","        'ctrl+enter':  {fn: 'insertBreak', allowDefault: true, async: true},","        'shift+enter': {fn: 'insertBreak', allowDefault: true, async: true}","    },","","","    /**","    HTML tags supported by this editor. Unsupported tags will be treated","    as text","","    @property {String} blockTags","    **/","    blockTags: 'div, p, h1, h2, h3, h4, h5',","","","    // -- Lifecycle ------------------------------------------------------------","","    initializer: function () {","        this.commands = Y.merge(this.commands, this.blockCommands);","","        if (this.supportedTags) {","            this.supportedTags += ',' + this.blockTags;","        } else {","            this.supportedTags = this.blockTags;","        }","","        if (this.keyCommands) {","            this.keyCommands = Y.merge(this.keyCommands, this.blockKeyCommands);","        }","","        this._attachBlockEvents();","    },","","","    destructor: function () {","        this._detachBlockEvents();","    },","","","    // -- Protected Methods ----------------------------------------------------","","    /**","    Attaches block events.","","    @method _attachBlockEvents","    @protected","    **/","    _attachBlockEvents: function () {","        if (this._blockEvents) {","            return;","        }","","        this._blockEvents = [","            this.on('selectionChange', this._blockOnSelectionChange, this)","        ];","    },","","","    /**","    Detaches block events.","","    @method _detachBlockEvents","    @protected","    **/","    _detachBlockEvents: function () {","        if (this._blockEvents) {","            new Y.EventHandle(this._blockEvents).detach();","            this._blockEvents = null;","        }","    },","","","    /**","    Replaces block elements containing the current selection with elements","    of the given `tag`","","    @method _formatBlock","    @param {String} tag The new block element tag","    @protected","    **/","    _formatBlock: function (tag) {","        tag = tag.replace(/[<>]/g, '');","","        if (-1 < this.blockTags.indexOf(tag)) {","            tag = '<' + tag + '>';","","            var selection = this.selection,","                range = selection.range(),","                nodes = [];","","            this._getNodes(range, this.blockTags).each(function (node) {","                var newNode = Y.Node.create(tag);","","                newNode.insert(node.get('childNodes'));","","                EDOM.copyStyles(node, newNode, this.supportedStyles, {","                    explicit: true,","                    overwrite: false","                });","","                node.replace(newNode).remove(true);","","                nodes.push(newNode);","            }, this);","","            // hack until bookmarks are implemented to preserve range","            range.startNode(nodes[0]);","            range.endNode(nodes[nodes.length]);","","            range.shrink().collapse({toStart: true});","","            selection.select(range);","        }","    },","","","    /**","    Inserts a `return` at the current selection point.","","    Any content contained by the range is deleted, resulting in a collapsed range.","","    If the range is at the start of a block, a duplicate, empty block is","    inserted as the previous sibling of current block. The range is positioned","    at the beginning of the new block","","    If the range is at the end of a block, a new `<p>` element is created as","    the next sibling of the current block. The range is positioned at the start","    of the new block.","","    If the range is in the middle of a block, the block will be split at the","    current position. The range will be positioned at the beginning of the new","    block.","","    @method _insertReturn","    @protected","    **/","    _insertReturn: function () {","        var selection = this.selection,","            range = selection.range().shrink(),","            block, startRange, endRange;","","        range.deleteContents();","","        // the range will be collapsed after deleteContents, so","        // there will only ever be one 'block'","        block = this._getNodes(range, this.blockTags).item(0);","","        // when hitting enter in an `empty` block, collapse the","        // the range to the end of the block to force the new block","        // to be inserted after","        if ('' === block.get('text')) {","            range.selectNodeContents(block).collapse();","        }","","        range.expand({stopAt: block});","        startRange = range.clone().selectNodeContents(block).collapse({toStart: true});","        endRange = range.clone().selectNodeContents(block).collapse();","","        if (0 === range.compare(startRange, {myPoint: 'start', otherPoint: 'start'})) {","            // the range is collapsed at the start of the block, insert","            // a clone of the block before the current block","            block = block.insert(block.cloneNode(), 'before').previous();","        } else if (0 === range.compare(endRange, {myPoint: 'end', otherPoint: 'end'})) {","            // the range is collapsed at the end of the block, start a new","            // paragraph after the current block","            block = block.insert('<p></p>', 'after').next();","        } else {","            // somewhere in the middle of a block node, split it","            block = this._splitRange(range, this.blockTags);","        }","","        // in order to be able to place the cursor inside an element","        // in webkit we need to insert a br","        if (EDOM.isEmptyNode(block)) {","            block.setHTML('<br>');","        }","","        range.selectNodeContents(block).collapse({toStart: true});","","        selection.select(range);","    },","","","    /**","    Default query function for block elements","","    @method _queryBlockCommand","    @return {NodeList} A nodelist of the block nodes containing the range","    @protected","     */","    _queryBlockCommand: function() {","        return this._getNodes(this.selection.range(), this.blockTags);","    },","","","    /**","    Splits elements after the given range until a node matching the","    given `selector` is reached.","","    @method _splitRange","    @param {Range} range","    @param {String} selector","    @return {Node} The node created after splitting","    @protected","    **/","    _splitRange: function (range, selector) {","        var endNode, endOffset;","","        endNode = range.endNode();","        endOffset = range.endOffset();","","        while (!endNode.test(selector)) {","            endOffset = EDOM.split(endNode, endOffset);","            endNode = endOffset.get('parentNode');","        }","","        if (this._inputNode !== endNode) {","            endOffset = EDOM.split(endNode, endOffset);","            endNode = endOffset.get('parentNode');","        }","","        if (!endOffset._node) {","            endOffset = endNode.get('childNodes').item(endOffset);","        }","","        return endOffset;","    },","","","    // -- Protected Event Handlers ---------------------------------------------","","    /**","    Event handler for the selection `change` event","","    Creates a default `block` if none exists for the current selection","","    @method _blockOnSelectionChange","    @param {EventFacade} e","    @protected","    **/","    _blockOnSelectionChange: function (e) {","        var range = e.range,","            startNode;","","        if (!range || !range.isCollapsed()) {","            return;","        }","","        startNode = range.startNode();","","        if (this._inputNode === startNode.ancestor(this.blockTags, true)) {","            Y.Editor.Base.prototype._execCommand.call(this, 'formatBlock', '<p>');","        }","    }","});","","Y.namespace('Editor').Block = EditorBlock;","","}());","","","}, '@VERSION@', {","    \"requires\": [","        \"base-build\",","        \"event-custom\",","        \"gallery-sm-editor-base\",","        \"gallery-sm-editor-dom\",","        \"gallery-sm-editor-keys\",","        \"node-base\"","    ]","});","","}());"]};
}
var __cov_hiGSkMR8XG_1h8inT2jOxA = __coverage__['build/gallery-sm-editor-block/gallery-sm-editor-block.js'];
__cov_hiGSkMR8XG_1h8inT2jOxA.s['1']++;YUI.add('gallery-sm-editor-block',function(Y,NAME){__cov_hiGSkMR8XG_1h8inT2jOxA.f['1']++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['2']++;(function(){__cov_hiGSkMR8XG_1h8inT2jOxA.f['2']++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['3']++;var EDOM=Y.Editor.DOM;__cov_hiGSkMR8XG_1h8inT2jOxA.s['4']++;var EditorBlock=Y.Base.create('editorBlock',Y.Base,[],{blockCommands:{formatBlock:{commandFn:'_formatBlock',queryFn:'_queryBlockCommand'},heading:{commandFn:'_formatBlock',queryFn:'_queryBlockCommand'},insertBreak:{commandFn:'_noCommand'},insertParagraph:{commandFn:'_insertReturn',queryFn:'_queryBlockCommand'}},blockKeyCommands:{'alt+c':'justifyCenter','alt+f':'justifyFull','alt+l':'justifyLeft','alt+r':'justifyRight','enter':'insertParagraph','ctrl+enter':{fn:'insertBreak',allowDefault:true,async:true},'shift+enter':{fn:'insertBreak',allowDefault:true,async:true}},blockTags:'div, p, h1, h2, h3, h4, h5',initializer:function(){__cov_hiGSkMR8XG_1h8inT2jOxA.f['3']++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['5']++;this.commands=Y.merge(this.commands,this.blockCommands);__cov_hiGSkMR8XG_1h8inT2jOxA.s['6']++;if(this.supportedTags){__cov_hiGSkMR8XG_1h8inT2jOxA.b['1'][0]++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['7']++;this.supportedTags+=','+this.blockTags;}else{__cov_hiGSkMR8XG_1h8inT2jOxA.b['1'][1]++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['8']++;this.supportedTags=this.blockTags;}__cov_hiGSkMR8XG_1h8inT2jOxA.s['9']++;if(this.keyCommands){__cov_hiGSkMR8XG_1h8inT2jOxA.b['2'][0]++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['10']++;this.keyCommands=Y.merge(this.keyCommands,this.blockKeyCommands);}else{__cov_hiGSkMR8XG_1h8inT2jOxA.b['2'][1]++;}__cov_hiGSkMR8XG_1h8inT2jOxA.s['11']++;this._attachBlockEvents();},destructor:function(){__cov_hiGSkMR8XG_1h8inT2jOxA.f['4']++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['12']++;this._detachBlockEvents();},_attachBlockEvents:function(){__cov_hiGSkMR8XG_1h8inT2jOxA.f['5']++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['13']++;if(this._blockEvents){__cov_hiGSkMR8XG_1h8inT2jOxA.b['3'][0]++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['14']++;return;}else{__cov_hiGSkMR8XG_1h8inT2jOxA.b['3'][1]++;}__cov_hiGSkMR8XG_1h8inT2jOxA.s['15']++;this._blockEvents=[this.on('selectionChange',this._blockOnSelectionChange,this)];},_detachBlockEvents:function(){__cov_hiGSkMR8XG_1h8inT2jOxA.f['6']++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['16']++;if(this._blockEvents){__cov_hiGSkMR8XG_1h8inT2jOxA.b['4'][0]++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['17']++;new Y.EventHandle(this._blockEvents).detach();__cov_hiGSkMR8XG_1h8inT2jOxA.s['18']++;this._blockEvents=null;}else{__cov_hiGSkMR8XG_1h8inT2jOxA.b['4'][1]++;}},_formatBlock:function(tag){__cov_hiGSkMR8XG_1h8inT2jOxA.f['7']++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['19']++;tag=tag.replace(/[<>]/g,'');__cov_hiGSkMR8XG_1h8inT2jOxA.s['20']++;if(-1<this.blockTags.indexOf(tag)){__cov_hiGSkMR8XG_1h8inT2jOxA.b['5'][0]++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['21']++;tag='<'+tag+'>';__cov_hiGSkMR8XG_1h8inT2jOxA.s['22']++;var selection=this.selection,range=selection.range(),nodes=[];__cov_hiGSkMR8XG_1h8inT2jOxA.s['23']++;this._getNodes(range,this.blockTags).each(function(node){__cov_hiGSkMR8XG_1h8inT2jOxA.f['8']++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['24']++;var newNode=Y.Node.create(tag);__cov_hiGSkMR8XG_1h8inT2jOxA.s['25']++;newNode.insert(node.get('childNodes'));__cov_hiGSkMR8XG_1h8inT2jOxA.s['26']++;EDOM.copyStyles(node,newNode,this.supportedStyles,{explicit:true,overwrite:false});__cov_hiGSkMR8XG_1h8inT2jOxA.s['27']++;node.replace(newNode).remove(true);__cov_hiGSkMR8XG_1h8inT2jOxA.s['28']++;nodes.push(newNode);},this);__cov_hiGSkMR8XG_1h8inT2jOxA.s['29']++;range.startNode(nodes[0]);__cov_hiGSkMR8XG_1h8inT2jOxA.s['30']++;range.endNode(nodes[nodes.length]);__cov_hiGSkMR8XG_1h8inT2jOxA.s['31']++;range.shrink().collapse({toStart:true});__cov_hiGSkMR8XG_1h8inT2jOxA.s['32']++;selection.select(range);}else{__cov_hiGSkMR8XG_1h8inT2jOxA.b['5'][1]++;}},_insertReturn:function(){__cov_hiGSkMR8XG_1h8inT2jOxA.f['9']++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['33']++;var selection=this.selection,range=selection.range().shrink(),block,startRange,endRange;__cov_hiGSkMR8XG_1h8inT2jOxA.s['34']++;range.deleteContents();__cov_hiGSkMR8XG_1h8inT2jOxA.s['35']++;block=this._getNodes(range,this.blockTags).item(0);__cov_hiGSkMR8XG_1h8inT2jOxA.s['36']++;if(''===block.get('text')){__cov_hiGSkMR8XG_1h8inT2jOxA.b['6'][0]++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['37']++;range.selectNodeContents(block).collapse();}else{__cov_hiGSkMR8XG_1h8inT2jOxA.b['6'][1]++;}__cov_hiGSkMR8XG_1h8inT2jOxA.s['38']++;range.expand({stopAt:block});__cov_hiGSkMR8XG_1h8inT2jOxA.s['39']++;startRange=range.clone().selectNodeContents(block).collapse({toStart:true});__cov_hiGSkMR8XG_1h8inT2jOxA.s['40']++;endRange=range.clone().selectNodeContents(block).collapse();__cov_hiGSkMR8XG_1h8inT2jOxA.s['41']++;if(0===range.compare(startRange,{myPoint:'start',otherPoint:'start'})){__cov_hiGSkMR8XG_1h8inT2jOxA.b['7'][0]++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['42']++;block=block.insert(block.cloneNode(),'before').previous();}else{__cov_hiGSkMR8XG_1h8inT2jOxA.b['7'][1]++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['43']++;if(0===range.compare(endRange,{myPoint:'end',otherPoint:'end'})){__cov_hiGSkMR8XG_1h8inT2jOxA.b['8'][0]++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['44']++;block=block.insert('<p></p>','after').next();}else{__cov_hiGSkMR8XG_1h8inT2jOxA.b['8'][1]++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['45']++;block=this._splitRange(range,this.blockTags);}}__cov_hiGSkMR8XG_1h8inT2jOxA.s['46']++;if(EDOM.isEmptyNode(block)){__cov_hiGSkMR8XG_1h8inT2jOxA.b['9'][0]++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['47']++;block.setHTML('<br>');}else{__cov_hiGSkMR8XG_1h8inT2jOxA.b['9'][1]++;}__cov_hiGSkMR8XG_1h8inT2jOxA.s['48']++;range.selectNodeContents(block).collapse({toStart:true});__cov_hiGSkMR8XG_1h8inT2jOxA.s['49']++;selection.select(range);},_queryBlockCommand:function(){__cov_hiGSkMR8XG_1h8inT2jOxA.f['10']++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['50']++;return this._getNodes(this.selection.range(),this.blockTags);},_splitRange:function(range,selector){__cov_hiGSkMR8XG_1h8inT2jOxA.f['11']++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['51']++;var endNode,endOffset;__cov_hiGSkMR8XG_1h8inT2jOxA.s['52']++;endNode=range.endNode();__cov_hiGSkMR8XG_1h8inT2jOxA.s['53']++;endOffset=range.endOffset();__cov_hiGSkMR8XG_1h8inT2jOxA.s['54']++;while(!endNode.test(selector)){__cov_hiGSkMR8XG_1h8inT2jOxA.s['55']++;endOffset=EDOM.split(endNode,endOffset);__cov_hiGSkMR8XG_1h8inT2jOxA.s['56']++;endNode=endOffset.get('parentNode');}__cov_hiGSkMR8XG_1h8inT2jOxA.s['57']++;if(this._inputNode!==endNode){__cov_hiGSkMR8XG_1h8inT2jOxA.b['10'][0]++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['58']++;endOffset=EDOM.split(endNode,endOffset);__cov_hiGSkMR8XG_1h8inT2jOxA.s['59']++;endNode=endOffset.get('parentNode');}else{__cov_hiGSkMR8XG_1h8inT2jOxA.b['10'][1]++;}__cov_hiGSkMR8XG_1h8inT2jOxA.s['60']++;if(!endOffset._node){__cov_hiGSkMR8XG_1h8inT2jOxA.b['11'][0]++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['61']++;endOffset=endNode.get('childNodes').item(endOffset);}else{__cov_hiGSkMR8XG_1h8inT2jOxA.b['11'][1]++;}__cov_hiGSkMR8XG_1h8inT2jOxA.s['62']++;return endOffset;},_blockOnSelectionChange:function(e){__cov_hiGSkMR8XG_1h8inT2jOxA.f['12']++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['63']++;var range=e.range,startNode;__cov_hiGSkMR8XG_1h8inT2jOxA.s['64']++;if((__cov_hiGSkMR8XG_1h8inT2jOxA.b['13'][0]++,!range)||(__cov_hiGSkMR8XG_1h8inT2jOxA.b['13'][1]++,!range.isCollapsed())){__cov_hiGSkMR8XG_1h8inT2jOxA.b['12'][0]++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['65']++;return;}else{__cov_hiGSkMR8XG_1h8inT2jOxA.b['12'][1]++;}__cov_hiGSkMR8XG_1h8inT2jOxA.s['66']++;startNode=range.startNode();__cov_hiGSkMR8XG_1h8inT2jOxA.s['67']++;if(this._inputNode===startNode.ancestor(this.blockTags,true)){__cov_hiGSkMR8XG_1h8inT2jOxA.b['14'][0]++;__cov_hiGSkMR8XG_1h8inT2jOxA.s['68']++;Y.Editor.Base.prototype._execCommand.call(this,'formatBlock','<p>');}else{__cov_hiGSkMR8XG_1h8inT2jOxA.b['14'][1]++;}}});__cov_hiGSkMR8XG_1h8inT2jOxA.s['69']++;Y.namespace('Editor').Block=EditorBlock;}());},'@VERSION@',{'requires':['base-build','event-custom','gallery-sm-editor-base','gallery-sm-editor-dom','gallery-sm-editor-keys','node-base']});
