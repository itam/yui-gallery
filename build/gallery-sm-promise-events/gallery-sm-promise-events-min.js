YUI.add("gallery-sm-promise-events",function(e,t){"use strict";var n=e.Array,r;r=e.Promise.EventNotifier=function(){this._targets=[]},r.decorate=function(e){return e._evts?e:(e._evts={subs:{},targets:[]},e.on=function(t,n){return t&&n&&(e._evts.subs[t]||(e._evts.subs[t]=[]),e._evts.subs[t].push(n)),e},e.then=function(e){return function(t,n){var i=r.decorate(e.call(this,t,n));return this._evts.targets.push(i),i}}(e.then),e)},e.mix(r.prototype,{addEvents:function(e){return this._targets.push(e),r.decorate(e)},fire:function(t){var r=this._targets.slice(),i={},s=arguments.length>1&&n(arguments,1,!0),o,u,a,f,l,c,h;s&&s.unshift(null,null);for(a=0;a<r.length;++a){o=r[a];if(r[a]._evts){c=e.stamp(r[a]);if(i[c])continue;i[c]=1,r.push.apply(r,r[a]._evts.targets),u=o._evts.subs[t];if(u)for(f=0,l=u.length;f<l;++f)h=u[f],s&&(s[0]=h,h=e.bind.apply(e,s)),e.soon(h)}}return this}})},"@VERSION@",{requires:["promise"]});
