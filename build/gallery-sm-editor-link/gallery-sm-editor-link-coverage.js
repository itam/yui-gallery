if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-sm-editor-link/gallery-sm-editor-link.js']) {
   __coverage__['build/gallery-sm-editor-link/gallery-sm-editor-link.js'] = {"path":"build/gallery-sm-editor-link/gallery-sm-editor-link.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":34},"end":{"line":1,"column":53}}},"2":{"name":"(anonymous_2)","line":25,"loc":{"start":{"line":25,"column":1},"end":{"line":25,"column":12}}},"3":{"name":"(anonymous_3)","line":69,"loc":{"start":{"line":69,"column":17},"end":{"line":69,"column":29}}},"4":{"name":"(anonymous_4)","line":89,"loc":{"start":{"line":89,"column":12},"end":{"line":89,"column":24}}},"5":{"name":"(anonymous_5)","line":104,"loc":{"start":{"line":104,"column":20},"end":{"line":104,"column":31}}},"6":{"name":"(anonymous_6)","line":125,"loc":{"start":{"line":125,"column":17},"end":{"line":125,"column":34}}},"7":{"name":"(anonymous_7)","line":175,"loc":{"start":{"line":175,"column":13},"end":{"line":175,"column":24}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":206,"column":85}},"2":{"start":{"line":25,"column":0},"end":{"line":203,"column":5}},"3":{"start":{"line":26,"column":0},"end":{"line":199,"column":3}},"4":{"start":{"line":70,"column":8},"end":{"line":70,"column":66}},"5":{"start":{"line":72,"column":8},"end":{"line":76,"column":9}},"6":{"start":{"line":73,"column":12},"end":{"line":73,"column":54}},"7":{"start":{"line":75,"column":12},"end":{"line":75,"column":47}},"8":{"start":{"line":90,"column":8},"end":{"line":90,"column":39}},"9":{"start":{"line":105,"column":8},"end":{"line":105,"column":21}},"10":{"start":{"line":107,"column":8},"end":{"line":107,"column":70}},"11":{"start":{"line":109,"column":8},"end":{"line":109,"column":56}},"12":{"start":{"line":126,"column":8},"end":{"line":127,"column":35}},"13":{"start":{"line":129,"column":8},"end":{"line":131,"column":9}},"14":{"start":{"line":130,"column":12},"end":{"line":130,"column":19}},"15":{"start":{"line":133,"column":8},"end":{"line":136,"column":9}},"16":{"start":{"line":134,"column":12},"end":{"line":134,"column":27}},"17":{"start":{"line":135,"column":12},"end":{"line":135,"column":43}},"18":{"start":{"line":138,"column":8},"end":{"line":138,"column":34}},"19":{"start":{"line":139,"column":8},"end":{"line":139,"column":53}},"20":{"start":{"line":140,"column":8},"end":{"line":140,"column":71}},"21":{"start":{"line":142,"column":8},"end":{"line":142,"column":75}},"22":{"start":{"line":143,"column":8},"end":{"line":143,"column":48}},"23":{"start":{"line":145,"column":8},"end":{"line":145,"column":38}},"24":{"start":{"line":147,"column":8},"end":{"line":147,"column":37}},"25":{"start":{"line":149,"column":8},"end":{"line":158,"column":9}},"26":{"start":{"line":150,"column":12},"end":{"line":150,"column":58}},"27":{"start":{"line":152,"column":12},"end":{"line":157,"column":13}},"28":{"start":{"line":153,"column":16},"end":{"line":153,"column":53}},"29":{"start":{"line":154,"column":16},"end":{"line":154,"column":47}},"30":{"start":{"line":156,"column":16},"end":{"line":156,"column":53}},"31":{"start":{"line":160,"column":8},"end":{"line":160,"column":48}},"32":{"start":{"line":162,"column":8},"end":{"line":162,"column":37}},"33":{"start":{"line":176,"column":8},"end":{"line":177,"column":23}},"34":{"start":{"line":182,"column":8},"end":{"line":197,"column":9}},"35":{"start":{"line":183,"column":12},"end":{"line":185,"column":42}},"36":{"start":{"line":189,"column":12},"end":{"line":189,"column":32}},"37":{"start":{"line":191,"column":12},"end":{"line":191,"column":33}},"38":{"start":{"line":193,"column":12},"end":{"line":193,"column":43}},"39":{"start":{"line":194,"column":12},"end":{"line":194,"column":46}},"40":{"start":{"line":196,"column":12},"end":{"line":196,"column":57}},"41":{"start":{"line":201,"column":0},"end":{"line":201,"column":40}}},"branchMap":{"1":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":8},"end":{"line":72,"column":8}},{"start":{"line":72,"column":8},"end":{"line":72,"column":8}}]},"2":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":8},"end":{"line":129,"column":8}},{"start":{"line":129,"column":8},"end":{"line":129,"column":8}}]},"3":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":8},"end":{"line":133,"column":8}},{"start":{"line":133,"column":8},"end":{"line":133,"column":8}}]},"4":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":8},"end":{"line":138,"column":15}},{"start":{"line":138,"column":20},"end":{"line":138,"column":32}}]},"5":{"line":139,"type":"binary-expr","locations":[{"start":{"line":139,"column":33},"end":{"line":139,"column":45}},{"start":{"line":139,"column":49},"end":{"line":139,"column":51}}]},"6":{"line":140,"type":"binary-expr","locations":[{"start":{"line":140,"column":44},"end":{"line":140,"column":58}},{"start":{"line":140,"column":62},"end":{"line":140,"column":69}}]},"7":{"line":149,"type":"if","locations":[{"start":{"line":149,"column":8},"end":{"line":149,"column":8}},{"start":{"line":149,"column":8},"end":{"line":149,"column":8}}]},"8":{"line":149,"type":"binary-expr","locations":[{"start":{"line":149,"column":12},"end":{"line":149,"column":24}},{"start":{"line":149,"column":28},"end":{"line":149,"column":61}}]},"9":{"line":152,"type":"if","locations":[{"start":{"line":152,"column":12},"end":{"line":152,"column":12}},{"start":{"line":152,"column":12},"end":{"line":152,"column":12}}]},"10":{"line":182,"type":"if","locations":[{"start":{"line":182,"column":8},"end":{"line":182,"column":8}},{"start":{"line":182,"column":8},"end":{"line":182,"column":8}}]}},"code":["(function () { YUI.add('gallery-sm-editor-link', function (Y, NAME) {","","/*jshint expr:true, onevar:false */","","/**","Provides the `Editor.Link` extension.","","@module gallery-sm-editor","@submodule gallery-sm-editor-link","**/","","/**","Extension for `Editor.Base` that enables inserting links","","Provides support for the following commands:","","- createLink","- unlink","","@class Editor.Link","@extends Base","@extensionfor Editor.Base","**/","","(function() {","var EditorLink = Y.Base.create('editorLink', Y.Base, [], {","    // -- Public Properties ----------------------------------------------------","","    /**","    Hash of link commands supported by this editor.","","    Names should correspond with valid `execCommand()` command names. Values","    are properties in the following format:","","    @property {Object} linkCommands","        @param {Function|String} commandFn","        @param {Function|String} [queryFn]","    **/","    linkCommands: {","        createLink: {","            commandFn: '_createLink',","            queryFn:   'isLink'","        },","","        unlink: {","            commandFn: '_unlink',","            queryFn:   'isLink'","        }","    },","","    /**","    HTML tags supported by this editor. Unsupported tags will be treated","    as text","","    @property {String} supportedTags","    **/","    linkTags: 'a',","","    /**","    HTML Template for building an anchor node","","    @property {Object} linkTemplate","    **/","    linkTemplate: '<a href=\"{href}\" target=\"{target}\"></a>',","","","    // -- Lifecycle ------------------------------------------------------------","","    initializer: function () {","        this.commands = Y.merge(this.commands, this.linkCommands);","","        if (this.supportedTags) {","            this.supportedTags += ',' + this.linkTags;","        } else {","            this.supportedTags = this.linkTags;","        }","    },","","","    // -- Public Methods -------------------------------------------------------","","    /**","    Returns whether or not the current range is entirely in an anchor element","","    @method isLink","    @return {boolean} `true` if the range is contained in an anchor element,","      `false` otherwise","    **/","    isLink: function () {","        return !!this._getAnchorNode();","    },","","","    // -- Protected Methods ----------------------------------------------------","","    /**","    Returns the nearest ancestor anchor that entirely contains","    the current range","","    @method _getAnchorNode","    @return {Node} The containing anchor element","    @protected","    **/","    _getAnchorNode: function() {","        this.focus();","","        var parentNode = this.selection.range().shrink().parentNode();","","        return parentNode.ancestor(this.linkTags, true);","    },","","","    /**","    Implementation for the `createLink` command","","    Wraps the currently selected range in an anchor `<a>` tag","","    @method _createLink","    @param {Object} options","        @param {String} options.href","        @param {String} [options.target=_self]","        @param {String} [options.text]","    @protected","    **/","    _createLink: function(options){","        var range = this.selection.range(),","            anchorNode, styleNodes;","","        if (!range) {","            return;","        }","","        if (this.isLink()) {","            this._unlink();","            range = this.selection.range();","        }","","        options || (options = {});","        options.href = encodeURI(options.href || '');","        options.target = encodeURIComponent(options.target || '_self');","","        anchorNode = Y.Node.create(Y.Lang.sub(this.linkTemplate, options));","        styleNodes = this._getStyleNodes(range);","","        anchorNode.append(styleNodes);","","        range.insertNode(anchorNode);","","        if (options.text && options.text !== range.toString()) {","            var firstChild = anchorNode.get('firstChild');","","            if (this._isStyleNode(firstChild)) {","                firstChild.set('text', options.text);","                anchorNode.setHTML(firstChild);","            } else {","                anchorNode.set('text', options.text);","            }","        }","","        range.selectNode(anchorNode).collapse();","","        this.selection.select(range);","    },","","","    /**","    Removes link by replacing the anchor element with the child nodes","    of the anchor","","    The anchor element will be removed from the DOM and destroyed.","","    @method _unlink","    @protected","    **/","    _unlink: function() {","        var selection = this.selection,","            anchorNode;","","        // we can use the native unlink command once we have bookmarking","        // in place, but firefox selects adjacent text nodes after unlink","","        if (anchorNode = this._getAnchorNode()) {","            var firstChild = anchorNode.get('firstChild'),","                lastChild = anchorNode.get('lastChild'),","                range = selection.range();","","            // only need to unwrap one of the children to unwrap the","            // whole anchorNode","            firstChild.unwrap();","","            anchorNode.destroy();","","            range.startNode(firstChild, 0);","            range.endNode(lastChild, 'after');","","            selection.select(range.shrink({trim: true}));","        }","    }","});","","Y.namespace('Editor').Link = EditorLink;","","}());","","","}, '@VERSION@', {\"requires\": [\"base-build\", \"gallery-sm-editor-base\", \"node-base\"]});","","}());"]};
}
var __cov_URaa20$SP4SK4EP2RxuctA = __coverage__['build/gallery-sm-editor-link/gallery-sm-editor-link.js'];
__cov_URaa20$SP4SK4EP2RxuctA.s['1']++;YUI.add('gallery-sm-editor-link',function(Y,NAME){__cov_URaa20$SP4SK4EP2RxuctA.f['1']++;__cov_URaa20$SP4SK4EP2RxuctA.s['2']++;(function(){__cov_URaa20$SP4SK4EP2RxuctA.f['2']++;__cov_URaa20$SP4SK4EP2RxuctA.s['3']++;var EditorLink=Y.Base.create('editorLink',Y.Base,[],{linkCommands:{createLink:{commandFn:'_createLink',queryFn:'isLink'},unlink:{commandFn:'_unlink',queryFn:'isLink'}},linkTags:'a',linkTemplate:'<a href="{href}" target="{target}"></a>',initializer:function(){__cov_URaa20$SP4SK4EP2RxuctA.f['3']++;__cov_URaa20$SP4SK4EP2RxuctA.s['4']++;this.commands=Y.merge(this.commands,this.linkCommands);__cov_URaa20$SP4SK4EP2RxuctA.s['5']++;if(this.supportedTags){__cov_URaa20$SP4SK4EP2RxuctA.b['1'][0]++;__cov_URaa20$SP4SK4EP2RxuctA.s['6']++;this.supportedTags+=','+this.linkTags;}else{__cov_URaa20$SP4SK4EP2RxuctA.b['1'][1]++;__cov_URaa20$SP4SK4EP2RxuctA.s['7']++;this.supportedTags=this.linkTags;}},isLink:function(){__cov_URaa20$SP4SK4EP2RxuctA.f['4']++;__cov_URaa20$SP4SK4EP2RxuctA.s['8']++;return!!this._getAnchorNode();},_getAnchorNode:function(){__cov_URaa20$SP4SK4EP2RxuctA.f['5']++;__cov_URaa20$SP4SK4EP2RxuctA.s['9']++;this.focus();__cov_URaa20$SP4SK4EP2RxuctA.s['10']++;var parentNode=this.selection.range().shrink().parentNode();__cov_URaa20$SP4SK4EP2RxuctA.s['11']++;return parentNode.ancestor(this.linkTags,true);},_createLink:function(options){__cov_URaa20$SP4SK4EP2RxuctA.f['6']++;__cov_URaa20$SP4SK4EP2RxuctA.s['12']++;var range=this.selection.range(),anchorNode,styleNodes;__cov_URaa20$SP4SK4EP2RxuctA.s['13']++;if(!range){__cov_URaa20$SP4SK4EP2RxuctA.b['2'][0]++;__cov_URaa20$SP4SK4EP2RxuctA.s['14']++;return;}else{__cov_URaa20$SP4SK4EP2RxuctA.b['2'][1]++;}__cov_URaa20$SP4SK4EP2RxuctA.s['15']++;if(this.isLink()){__cov_URaa20$SP4SK4EP2RxuctA.b['3'][0]++;__cov_URaa20$SP4SK4EP2RxuctA.s['16']++;this._unlink();__cov_URaa20$SP4SK4EP2RxuctA.s['17']++;range=this.selection.range();}else{__cov_URaa20$SP4SK4EP2RxuctA.b['3'][1]++;}__cov_URaa20$SP4SK4EP2RxuctA.s['18']++;(__cov_URaa20$SP4SK4EP2RxuctA.b['4'][0]++,options)||(__cov_URaa20$SP4SK4EP2RxuctA.b['4'][1]++,options={});__cov_URaa20$SP4SK4EP2RxuctA.s['19']++;options.href=encodeURI((__cov_URaa20$SP4SK4EP2RxuctA.b['5'][0]++,options.href)||(__cov_URaa20$SP4SK4EP2RxuctA.b['5'][1]++,''));__cov_URaa20$SP4SK4EP2RxuctA.s['20']++;options.target=encodeURIComponent((__cov_URaa20$SP4SK4EP2RxuctA.b['6'][0]++,options.target)||(__cov_URaa20$SP4SK4EP2RxuctA.b['6'][1]++,'_self'));__cov_URaa20$SP4SK4EP2RxuctA.s['21']++;anchorNode=Y.Node.create(Y.Lang.sub(this.linkTemplate,options));__cov_URaa20$SP4SK4EP2RxuctA.s['22']++;styleNodes=this._getStyleNodes(range);__cov_URaa20$SP4SK4EP2RxuctA.s['23']++;anchorNode.append(styleNodes);__cov_URaa20$SP4SK4EP2RxuctA.s['24']++;range.insertNode(anchorNode);__cov_URaa20$SP4SK4EP2RxuctA.s['25']++;if((__cov_URaa20$SP4SK4EP2RxuctA.b['8'][0]++,options.text)&&(__cov_URaa20$SP4SK4EP2RxuctA.b['8'][1]++,options.text!==range.toString())){__cov_URaa20$SP4SK4EP2RxuctA.b['7'][0]++;__cov_URaa20$SP4SK4EP2RxuctA.s['26']++;var firstChild=anchorNode.get('firstChild');__cov_URaa20$SP4SK4EP2RxuctA.s['27']++;if(this._isStyleNode(firstChild)){__cov_URaa20$SP4SK4EP2RxuctA.b['9'][0]++;__cov_URaa20$SP4SK4EP2RxuctA.s['28']++;firstChild.set('text',options.text);__cov_URaa20$SP4SK4EP2RxuctA.s['29']++;anchorNode.setHTML(firstChild);}else{__cov_URaa20$SP4SK4EP2RxuctA.b['9'][1]++;__cov_URaa20$SP4SK4EP2RxuctA.s['30']++;anchorNode.set('text',options.text);}}else{__cov_URaa20$SP4SK4EP2RxuctA.b['7'][1]++;}__cov_URaa20$SP4SK4EP2RxuctA.s['31']++;range.selectNode(anchorNode).collapse();__cov_URaa20$SP4SK4EP2RxuctA.s['32']++;this.selection.select(range);},_unlink:function(){__cov_URaa20$SP4SK4EP2RxuctA.f['7']++;__cov_URaa20$SP4SK4EP2RxuctA.s['33']++;var selection=this.selection,anchorNode;__cov_URaa20$SP4SK4EP2RxuctA.s['34']++;if(anchorNode=this._getAnchorNode()){__cov_URaa20$SP4SK4EP2RxuctA.b['10'][0]++;__cov_URaa20$SP4SK4EP2RxuctA.s['35']++;var firstChild=anchorNode.get('firstChild'),lastChild=anchorNode.get('lastChild'),range=selection.range();__cov_URaa20$SP4SK4EP2RxuctA.s['36']++;firstChild.unwrap();__cov_URaa20$SP4SK4EP2RxuctA.s['37']++;anchorNode.destroy();__cov_URaa20$SP4SK4EP2RxuctA.s['38']++;range.startNode(firstChild,0);__cov_URaa20$SP4SK4EP2RxuctA.s['39']++;range.endNode(lastChild,'after');__cov_URaa20$SP4SK4EP2RxuctA.s['40']++;selection.select(range.shrink({trim:true}));}else{__cov_URaa20$SP4SK4EP2RxuctA.b['10'][1]++;}}});__cov_URaa20$SP4SK4EP2RxuctA.s['41']++;Y.namespace('Editor').Link=EditorLink;}());},'@VERSION@',{'requires':['base-build','gallery-sm-editor-base','node-base']});
