if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-sm-editor-delete/gallery-sm-editor-delete.js']) {
   __coverage__['build/gallery-sm-editor-delete/gallery-sm-editor-delete.js'] = {"path":"build/gallery-sm-editor-delete/gallery-sm-editor-delete.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":36},"end":{"line":1,"column":55}}},"2":{"name":"(anonymous_2)","line":25,"loc":{"start":{"line":25,"column":1},"end":{"line":25,"column":13}}},"3":{"name":"(anonymous_3)","line":69,"loc":{"start":{"line":69,"column":17},"end":{"line":69,"column":29}}},"4":{"name":"(anonymous_4)","line":112,"loc":{"start":{"line":112,"column":20},"end":{"line":112,"column":41}}},"5":{"name":"(anonymous_5)","line":114,"loc":{"start":{"line":114,"column":8},"end":{"line":114,"column":29}}},"6":{"name":"(anonymous_6)","line":199,"loc":{"start":{"line":199,"column":27},"end":{"line":199,"column":39}}},"7":{"name":"(anonymous_7)","line":201,"loc":{"start":{"line":201,"column":8},"end":{"line":201,"column":20}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":219,"column":3}},"2":{"start":{"line":25,"column":0},"end":{"line":208,"column":5}},"3":{"start":{"line":27,"column":0},"end":{"line":27,"column":23}},"4":{"start":{"line":29,"column":0},"end":{"line":204,"column":3}},"5":{"start":{"line":70,"column":8},"end":{"line":70,"column":68}},"6":{"start":{"line":72,"column":8},"end":{"line":74,"column":9}},"7":{"start":{"line":73,"column":12},"end":{"line":73,"column":81}},"8":{"start":{"line":115,"column":8},"end":{"line":118,"column":70}},"9":{"start":{"line":120,"column":8},"end":{"line":122,"column":9}},"10":{"start":{"line":121,"column":12},"end":{"line":121,"column":31}},"11":{"start":{"line":129,"column":8},"end":{"line":150,"column":9}},"12":{"start":{"line":131,"column":12},"end":{"line":131,"column":47}},"13":{"start":{"line":133,"column":12},"end":{"line":138,"column":19}},"14":{"start":{"line":140,"column":12},"end":{"line":147,"column":13}},"15":{"start":{"line":141,"column":16},"end":{"line":146,"column":17}},"16":{"start":{"line":142,"column":20},"end":{"line":142,"column":49}},"17":{"start":{"line":144,"column":20},"end":{"line":144,"column":42}},"18":{"start":{"line":145,"column":20},"end":{"line":145,"column":53}},"19":{"start":{"line":149,"column":12},"end":{"line":149,"column":29}},"20":{"start":{"line":154,"column":8},"end":{"line":185,"column":9}},"21":{"start":{"line":155,"column":12},"end":{"line":155,"column":35}},"22":{"start":{"line":156,"column":12},"end":{"line":156,"column":64}},"23":{"start":{"line":157,"column":12},"end":{"line":157,"column":29}},"24":{"start":{"line":160,"column":12},"end":{"line":162,"column":13}},"25":{"start":{"line":161,"column":16},"end":{"line":161,"column":62}},"26":{"start":{"line":164,"column":12},"end":{"line":164,"column":34}},"27":{"start":{"line":168,"column":12},"end":{"line":172,"column":13}},"28":{"start":{"line":169,"column":16},"end":{"line":169,"column":51}},"29":{"start":{"line":171,"column":16},"end":{"line":171,"column":44}},"30":{"start":{"line":177,"column":12},"end":{"line":184,"column":13}},"31":{"start":{"line":178,"column":16},"end":{"line":179,"column":63}},"32":{"start":{"line":181,"column":16},"end":{"line":183,"column":17}},"33":{"start":{"line":182,"column":20},"end":{"line":182,"column":57}},"34":{"start":{"line":187,"column":8},"end":{"line":187,"column":58}},"35":{"start":{"line":189,"column":8},"end":{"line":189,"column":32}},"36":{"start":{"line":202,"column":8},"end":{"line":202,"column":39}},"37":{"start":{"line":206,"column":0},"end":{"line":206,"column":44}}},"branchMap":{"1":{"line":58,"type":"cond-expr","locations":[{"start":{"line":58,"column":30},"end":{"line":61,"column":5}},{"start":{"line":61,"column":8},"end":{"line":64,"column":5}}]},"2":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":8},"end":{"line":72,"column":8}},{"start":{"line":72,"column":8},"end":{"line":72,"column":8}}]},"3":{"line":112,"type":"cond-expr","locations":[{"start":{"line":112,"column":20},"end":{"line":114,"column":5}},{"start":{"line":114,"column":8},"end":{"line":190,"column":5}}]},"4":{"line":120,"type":"if","locations":[{"start":{"line":120,"column":8},"end":{"line":120,"column":8}},{"start":{"line":120,"column":8},"end":{"line":120,"column":8}}]},"5":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":8},"end":{"line":129,"column":8}},{"start":{"line":129,"column":8},"end":{"line":129,"column":8}}]},"6":{"line":134,"type":"cond-expr","locations":[{"start":{"line":134,"column":54},"end":{"line":134,"column":59}},{"start":{"line":134,"column":62},"end":{"line":134,"column":69}}]},"7":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":12},"end":{"line":140,"column":12}},{"start":{"line":140,"column":12},"end":{"line":140,"column":12}}]},"8":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":16},"end":{"line":141,"column":16}},{"start":{"line":141,"column":16},"end":{"line":141,"column":16}}]},"9":{"line":154,"type":"if","locations":[{"start":{"line":154,"column":8},"end":{"line":154,"column":8}},{"start":{"line":154,"column":8},"end":{"line":154,"column":8}}]},"10":{"line":154,"type":"binary-expr","locations":[{"start":{"line":154,"column":12},"end":{"line":154,"column":22}},{"start":{"line":154,"column":26},"end":{"line":154,"column":34}},{"start":{"line":154,"column":38},"end":{"line":154,"column":61}}]},"11":{"line":160,"type":"if","locations":[{"start":{"line":160,"column":12},"end":{"line":160,"column":12}},{"start":{"line":160,"column":12},"end":{"line":160,"column":12}}]},"12":{"line":168,"type":"if","locations":[{"start":{"line":168,"column":12},"end":{"line":168,"column":12}},{"start":{"line":168,"column":12},"end":{"line":168,"column":12}}]},"13":{"line":177,"type":"if","locations":[{"start":{"line":177,"column":12},"end":{"line":177,"column":12}},{"start":{"line":177,"column":12},"end":{"line":177,"column":12}}]},"14":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":16},"end":{"line":181,"column":16}},{"start":{"line":181,"column":16},"end":{"line":181,"column":16}}]},"15":{"line":199,"type":"cond-expr","locations":[{"start":{"line":199,"column":27},"end":{"line":201,"column":5}},{"start":{"line":201,"column":8},"end":{"line":203,"column":5}}]}},"code":["(function () { YUI.add('gallery-sm-editor-delete', function (Y, NAME) {","","/*jshint expr:true, onevar:false */","","/**","Provides the `Editor.Delete` extension.","","@module gallery-sm-editor","@submodule gallery-sm-editor-delete","**/","","/**","Extension for `Editor.Base` that handles deletion","","Provides support for the following commands:","","- delete","- forwardDelete","","@class Editor.Delete","@extends Base","@extensionfor Editor.Base","**/","","(function () {","","var isIE = !!(Y.UA.ie);","","var EditorDelete = Y.Base.create('editorDelete', Y.Base, [], {","    // -- Public Properties ----------------------------------------------------","","    /**","    Hash of delete commands supported by this editor.","","    Names should correspond with valid `execCommand()` command names. Values","    are properties in the following format:","","    @property {Object} deleteCommands","        @param {Function|String} commandFn","        @param {Function|String} [queryFn]","    **/","    deleteCommands: {","        'delete': {","            commandFn: '_delete'","        },","","        forwardDelete: {","            commandFn: '_forwardDelete'","        }","    },","","","    /**","    Key commands related to delete functionality.","","    @property {Object} deleteKeyCommands","    **/","    deleteKeyCommands: isIE ? {","        'backspace':   {fn: 'delete',        allowDefault: true, async: true},","        'delete':      {fn: 'forwardDelete', allowDefault: true, async: true}","    } : {","        'backspace':   {fn: 'delete',        allowDefault: false, async: false},","        'delete':      {fn: 'forwardDelete', allowDefault: false, async: false}","    },","","","    // -- Lifecycle ------------------------------------------------------------","","    initializer: function () {","        this.commands = Y.merge(this.commands, this.deleteCommands);","","        if (this.keyCommands) {","            this.keyCommands = Y.merge(this.keyCommands, this.deleteKeyCommands);","        }","    },","","","    // -- Protected Methods ----------------------------------------------------","","    /**","    Handles backspace and delete because webkit is an idiot and will copy","    computed styles like `line-height`, `color` and `font-size` when merging","    blocks of different types.","","    For example given the following HTML:","","        <h1>foo</h1>","        <p>bar</p>","","    Hitting backspace with the cursor at the beginning of the `<p>` element will","    create a `<span>` in the `<h1>` after the text `foo` with the computed styles","    of the `<p>` element. The brilliant result is:","","        <h1>foo<span style=\"line-height: 1.2; font-size:12px; color:xxx;\">bar</span></h1>","","    Its so stupid and IE/Firefox do not behave this way.","","    Related, when deleting across blocks with different `text-alignment`,","    Firefox will copy `text-alignment` from the later block, which is opposite","    of what the other browsers do.","","    This method normalizes the behavior when deleting across blocks to *not*","    copy styles. The result from the previous example is now:","","        <h1>foobar</h1>","","    @method _delete","    @param {String} [direction=back] `forward` for a forward delete,","    `back` for a backspace","    @protected","    **/","    _delete: isIE ? function (direction) {","        // no-op","    } : function (direction) {","        var selection = this.selection,","            range = selection.range(),","            startBlock = range.startNode().ancestor(this.blockTags, true),","            endBlock = range.endNode().ancestor(this.blockTags, true);","","        if ('forward' !== direction) {","            direction = 'back';","        }","","        // With a collapsed range, a backspace will delete across blocks when","        // the range is a the start of a block and a fwd delete will delete","        // across blocks when the range is at the end of a block. Check to see","        // if the range is positioned at the start or end of the range and","        // assign startBlock/endBlock according to the direction of the delete.","        if (range.isCollapsed()) {","            // collapsed, so startBlock === endBlock.","            range.expand({stopAt: startBlock});","","            var compRange = range.clone().selectNodeContents(startBlock),","                compPoint = 'forward' === direction ? 'end' : 'start',","                compValue = range.compare(compRange, {","                    myPoint: compPoint,","                    otherPoint: compPoint","                });","","            if (0 === compValue) {","                if ('forward' === direction) {","                    endBlock = startBlock.next();","                } else {","                    endBlock = startBlock;","                    startBlock = endBlock.previous();","                }","            }","","            range.collapse();","        }","","        // The startBlock/endBlock will be different if deleting","        // across blocks.","        if (startBlock && endBlock && startBlock !== endBlock) {","            range.deleteContents();","            range.endNode(startBlock.get('lastChild'), 'after');","            range.collapse();","","            // only copy nodes from elements that have text content","            if (endBlock.get('text').length) {","                startBlock.append(endBlock.get('childNodes'));","            }","","            endBlock.remove(true);","        } else {","            // Not deleting across blocks, safe to use the native","            // browser delete methods","            if ('forward' === direction) {","                this._execCommand('forwardDelete');","            } else {","                this._execCommand('delete');","            }","","            // although sometimes firefox will delete a node and leave the","            // range in the editor input node which messes up the auto-block","            // generation. If startOffset references a valid node, select it.","            if (this._inputNode === range.parentNode()) {","                startBlock = this._inputNode.get('childNodes')","                                .item(range.startOffset() - 1);","","                if (startBlock) {","                    range.selectNodeContents(startBlock);","                }","            }","        }","","        range.collapse({toStart: ('back' === direction)});","","        selection.select(range);","    },","","","    /**","    Performs a forward delete from the current cursor position","","    @method _forwardDelete","    @protected","    **/","    _forwardDelete: isIE ? function () {","        // no-op","    } : function () {","        return this._delete('forward');","    }","});","","Y.namespace('Editor').Delete = EditorDelete;","","}());","","","}, '@VERSION@', {","    \"requires\": [","        \"base-build\",","        \"gallery-sm-editor-base\",","        \"gallery-sm-editor-block\",","        \"gallery-sm-editor-keys\",","        \"node-base\"","    ]","});","","}());"]};
}
var __cov_ryPRv9J9y9aje9Q4EJNIKw = __coverage__['build/gallery-sm-editor-delete/gallery-sm-editor-delete.js'];
__cov_ryPRv9J9y9aje9Q4EJNIKw.s['1']++;YUI.add('gallery-sm-editor-delete',function(Y,NAME){__cov_ryPRv9J9y9aje9Q4EJNIKw.f['1']++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['2']++;(function(){__cov_ryPRv9J9y9aje9Q4EJNIKw.f['2']++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['3']++;var isIE=!!Y.UA.ie;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['4']++;var EditorDelete=Y.Base.create('editorDelete',Y.Base,[],{deleteCommands:{'delete':{commandFn:'_delete'},forwardDelete:{commandFn:'_forwardDelete'}},deleteKeyCommands:isIE?(__cov_ryPRv9J9y9aje9Q4EJNIKw.b['1'][0]++,{'backspace':{fn:'delete',allowDefault:true,async:true},'delete':{fn:'forwardDelete',allowDefault:true,async:true}}):(__cov_ryPRv9J9y9aje9Q4EJNIKw.b['1'][1]++,{'backspace':{fn:'delete',allowDefault:false,async:false},'delete':{fn:'forwardDelete',allowDefault:false,async:false}}),initializer:function(){__cov_ryPRv9J9y9aje9Q4EJNIKw.f['3']++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['5']++;this.commands=Y.merge(this.commands,this.deleteCommands);__cov_ryPRv9J9y9aje9Q4EJNIKw.s['6']++;if(this.keyCommands){__cov_ryPRv9J9y9aje9Q4EJNIKw.b['2'][0]++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['7']++;this.keyCommands=Y.merge(this.keyCommands,this.deleteKeyCommands);}else{__cov_ryPRv9J9y9aje9Q4EJNIKw.b['2'][1]++;}},_delete:isIE?(__cov_ryPRv9J9y9aje9Q4EJNIKw.b['3'][0]++,function(direction){__cov_ryPRv9J9y9aje9Q4EJNIKw.f['4']++;}):(__cov_ryPRv9J9y9aje9Q4EJNIKw.b['3'][1]++,function(direction){__cov_ryPRv9J9y9aje9Q4EJNIKw.f['5']++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['8']++;var selection=this.selection,range=selection.range(),startBlock=range.startNode().ancestor(this.blockTags,true),endBlock=range.endNode().ancestor(this.blockTags,true);__cov_ryPRv9J9y9aje9Q4EJNIKw.s['9']++;if('forward'!==direction){__cov_ryPRv9J9y9aje9Q4EJNIKw.b['4'][0]++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['10']++;direction='back';}else{__cov_ryPRv9J9y9aje9Q4EJNIKw.b['4'][1]++;}__cov_ryPRv9J9y9aje9Q4EJNIKw.s['11']++;if(range.isCollapsed()){__cov_ryPRv9J9y9aje9Q4EJNIKw.b['5'][0]++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['12']++;range.expand({stopAt:startBlock});__cov_ryPRv9J9y9aje9Q4EJNIKw.s['13']++;var compRange=range.clone().selectNodeContents(startBlock),compPoint='forward'===direction?(__cov_ryPRv9J9y9aje9Q4EJNIKw.b['6'][0]++,'end'):(__cov_ryPRv9J9y9aje9Q4EJNIKw.b['6'][1]++,'start'),compValue=range.compare(compRange,{myPoint:compPoint,otherPoint:compPoint});__cov_ryPRv9J9y9aje9Q4EJNIKw.s['14']++;if(0===compValue){__cov_ryPRv9J9y9aje9Q4EJNIKw.b['7'][0]++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['15']++;if('forward'===direction){__cov_ryPRv9J9y9aje9Q4EJNIKw.b['8'][0]++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['16']++;endBlock=startBlock.next();}else{__cov_ryPRv9J9y9aje9Q4EJNIKw.b['8'][1]++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['17']++;endBlock=startBlock;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['18']++;startBlock=endBlock.previous();}}else{__cov_ryPRv9J9y9aje9Q4EJNIKw.b['7'][1]++;}__cov_ryPRv9J9y9aje9Q4EJNIKw.s['19']++;range.collapse();}else{__cov_ryPRv9J9y9aje9Q4EJNIKw.b['5'][1]++;}__cov_ryPRv9J9y9aje9Q4EJNIKw.s['20']++;if((__cov_ryPRv9J9y9aje9Q4EJNIKw.b['10'][0]++,startBlock)&&(__cov_ryPRv9J9y9aje9Q4EJNIKw.b['10'][1]++,endBlock)&&(__cov_ryPRv9J9y9aje9Q4EJNIKw.b['10'][2]++,startBlock!==endBlock)){__cov_ryPRv9J9y9aje9Q4EJNIKw.b['9'][0]++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['21']++;range.deleteContents();__cov_ryPRv9J9y9aje9Q4EJNIKw.s['22']++;range.endNode(startBlock.get('lastChild'),'after');__cov_ryPRv9J9y9aje9Q4EJNIKw.s['23']++;range.collapse();__cov_ryPRv9J9y9aje9Q4EJNIKw.s['24']++;if(endBlock.get('text').length){__cov_ryPRv9J9y9aje9Q4EJNIKw.b['11'][0]++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['25']++;startBlock.append(endBlock.get('childNodes'));}else{__cov_ryPRv9J9y9aje9Q4EJNIKw.b['11'][1]++;}__cov_ryPRv9J9y9aje9Q4EJNIKw.s['26']++;endBlock.remove(true);}else{__cov_ryPRv9J9y9aje9Q4EJNIKw.b['9'][1]++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['27']++;if('forward'===direction){__cov_ryPRv9J9y9aje9Q4EJNIKw.b['12'][0]++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['28']++;this._execCommand('forwardDelete');}else{__cov_ryPRv9J9y9aje9Q4EJNIKw.b['12'][1]++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['29']++;this._execCommand('delete');}__cov_ryPRv9J9y9aje9Q4EJNIKw.s['30']++;if(this._inputNode===range.parentNode()){__cov_ryPRv9J9y9aje9Q4EJNIKw.b['13'][0]++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['31']++;startBlock=this._inputNode.get('childNodes').item(range.startOffset()-1);__cov_ryPRv9J9y9aje9Q4EJNIKw.s['32']++;if(startBlock){__cov_ryPRv9J9y9aje9Q4EJNIKw.b['14'][0]++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['33']++;range.selectNodeContents(startBlock);}else{__cov_ryPRv9J9y9aje9Q4EJNIKw.b['14'][1]++;}}else{__cov_ryPRv9J9y9aje9Q4EJNIKw.b['13'][1]++;}}__cov_ryPRv9J9y9aje9Q4EJNIKw.s['34']++;range.collapse({toStart:'back'===direction});__cov_ryPRv9J9y9aje9Q4EJNIKw.s['35']++;selection.select(range);}),_forwardDelete:isIE?(__cov_ryPRv9J9y9aje9Q4EJNIKw.b['15'][0]++,function(){__cov_ryPRv9J9y9aje9Q4EJNIKw.f['6']++;}):(__cov_ryPRv9J9y9aje9Q4EJNIKw.b['15'][1]++,function(){__cov_ryPRv9J9y9aje9Q4EJNIKw.f['7']++;__cov_ryPRv9J9y9aje9Q4EJNIKw.s['36']++;return this._delete('forward');})});__cov_ryPRv9J9y9aje9Q4EJNIKw.s['37']++;Y.namespace('Editor').Delete=EditorDelete;}());},'@VERSION@',{'requires':['base-build','gallery-sm-editor-base','gallery-sm-editor-block','gallery-sm-editor-keys','node-base']});
