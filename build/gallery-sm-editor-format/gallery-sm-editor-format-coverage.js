if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-sm-editor-format/gallery-sm-editor-format.js']) {
   __coverage__['build/gallery-sm-editor-format/gallery-sm-editor-format.js'] = {"path":"build/gallery-sm-editor-format/gallery-sm-editor-format.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0],"10":[0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":36},"end":{"line":1,"column":55}}},"2":{"name":"(anonymous_2)","line":20,"loc":{"start":{"line":20,"column":1},"end":{"line":20,"column":13}}},"3":{"name":"(anonymous_3)","line":32,"loc":{"start":{"line":32,"column":17},"end":{"line":32,"column":29}}},"4":{"name":"(anonymous_4)","line":35,"loc":{"start":{"line":35,"column":42},"end":{"line":35,"column":57}}},"5":{"name":"(anonymous_5)","line":54,"loc":{"start":{"line":54,"column":17},"end":{"line":54,"column":33}}},"6":{"name":"flatten","line":55,"loc":{"start":{"line":55,"column":8},"end":{"line":55,"column":32}}},"7":{"name":"(anonymous_7)","line":58,"loc":{"start":{"line":58,"column":47},"end":{"line":58,"column":63}}},"8":{"name":"(anonymous_8)","line":116,"loc":{"start":{"line":116,"column":14},"end":{"line":116,"column":31}}},"9":{"name":"(anonymous_9)","line":132,"loc":{"start":{"line":132,"column":18},"end":{"line":132,"column":34}}},"10":{"name":"(anonymous_10)","line":149,"loc":{"start":{"line":149,"column":18},"end":{"line":149,"column":34}}},"11":{"name":"(anonymous_11)","line":164,"loc":{"start":{"line":164,"column":14},"end":{"line":164,"column":31}}},"12":{"name":"(anonymous_12)","line":181,"loc":{"start":{"line":181,"column":20},"end":{"line":181,"column":35}}},"13":{"name":"(anonymous_13)","line":185,"loc":{"start":{"line":185,"column":21},"end":{"line":185,"column":33}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":197,"column":110}},"2":{"start":{"line":20,"column":0},"end":{"line":194,"column":5}},"3":{"start":{"line":22,"column":0},"end":{"line":24,"column":32}},"4":{"start":{"line":26,"column":0},"end":{"line":190,"column":3}},"5":{"start":{"line":33,"column":8},"end":{"line":33,"column":34}},"6":{"start":{"line":35,"column":8},"end":{"line":37,"column":17}},"7":{"start":{"line":36,"column":12},"end":{"line":36,"column":58}},"8":{"start":{"line":55,"column":8},"end":{"line":98,"column":9}},"9":{"start":{"line":56,"column":12},"end":{"line":56,"column":59}},"10":{"start":{"line":58,"column":12},"end":{"line":97,"column":21}},"11":{"start":{"line":59,"column":16},"end":{"line":59,"column":31}},"12":{"start":{"line":61,"column":16},"end":{"line":61,"column":35}},"13":{"start":{"line":62,"column":16},"end":{"line":62,"column":52}},"14":{"start":{"line":64,"column":16},"end":{"line":96,"column":17}},"15":{"start":{"line":65,"column":20},"end":{"line":69,"column":21}},"16":{"start":{"line":66,"column":24},"end":{"line":66,"column":45}},"17":{"start":{"line":67,"column":27},"end":{"line":69,"column":21}},"18":{"start":{"line":68,"column":24},"end":{"line":68,"column":53}},"19":{"start":{"line":72,"column":20},"end":{"line":87,"column":21}},"20":{"start":{"line":73,"column":24},"end":{"line":73,"column":55}},"21":{"start":{"line":74,"column":27},"end":{"line":87,"column":21}},"22":{"start":{"line":75,"column":24},"end":{"line":75,"column":57}},"23":{"start":{"line":77,"column":24},"end":{"line":84,"column":25}},"24":{"start":{"line":78,"column":28},"end":{"line":78,"column":71}},"25":{"start":{"line":80,"column":28},"end":{"line":83,"column":31}},"26":{"start":{"line":89,"column":20},"end":{"line":89,"column":45}},"27":{"start":{"line":91,"column":20},"end":{"line":93,"column":21}},"28":{"start":{"line":92,"column":24},"end":{"line":92,"column":42}},"29":{"start":{"line":95,"column":20},"end":{"line":95,"column":47}},"30":{"start":{"line":100,"column":8},"end":{"line":100,"column":69}},"31":{"start":{"line":102,"column":8},"end":{"line":102,"column":33}},"32":{"start":{"line":104,"column":8},"end":{"line":104,"column":20}},"33":{"start":{"line":117,"column":8},"end":{"line":117,"column":67}},"34":{"start":{"line":119,"column":8},"end":{"line":119,"column":53}},"35":{"start":{"line":133,"column":8},"end":{"line":133,"column":27}},"36":{"start":{"line":137,"column":8},"end":{"line":137,"column":118}},"37":{"start":{"line":150,"column":8},"end":{"line":150,"column":27}},"38":{"start":{"line":152,"column":8},"end":{"line":152,"column":75}},"39":{"start":{"line":165,"column":8},"end":{"line":165,"column":54}},"40":{"start":{"line":167,"column":8},"end":{"line":167,"column":66}},"41":{"start":{"line":182,"column":16},"end":{"line":182,"column":41}},"42":{"start":{"line":186,"column":16},"end":{"line":186,"column":40}},"43":{"start":{"line":192,"column":0},"end":{"line":192,"column":44}}},"branchMap":{"1":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":16},"end":{"line":64,"column":16}},{"start":{"line":64,"column":16},"end":{"line":64,"column":16}}]},"2":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":20},"end":{"line":65,"column":20}},{"start":{"line":65,"column":20},"end":{"line":65,"column":20}}]},"3":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":27},"end":{"line":67,"column":27}},{"start":{"line":67,"column":27},"end":{"line":67,"column":27}}]},"4":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":20},"end":{"line":72,"column":20}},{"start":{"line":72,"column":20},"end":{"line":72,"column":20}}]},"5":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":27},"end":{"line":74,"column":27}},{"start":{"line":74,"column":27},"end":{"line":74,"column":27}}]},"6":{"line":74,"type":"binary-expr","locations":[{"start":{"line":74,"column":31},"end":{"line":74,"column":61}},{"start":{"line":74,"column":65},"end":{"line":74,"column":86}}]},"7":{"line":77,"type":"if","locations":[{"start":{"line":77,"column":24},"end":{"line":77,"column":24}},{"start":{"line":77,"column":24},"end":{"line":77,"column":24}}]},"8":{"line":91,"type":"if","locations":[{"start":{"line":91,"column":20},"end":{"line":91,"column":20}},{"start":{"line":91,"column":20},"end":{"line":91,"column":20}}]},"9":{"line":137,"type":"binary-expr","locations":[{"start":{"line":137,"column":15},"end":{"line":137,"column":37}},{"start":{"line":137,"column":42},"end":{"line":137,"column":87}},{"start":{"line":137,"column":91},"end":{"line":137,"column":116}}]},"10":{"line":152,"type":"binary-expr","locations":[{"start":{"line":152,"column":15},"end":{"line":152,"column":19}},{"start":{"line":152,"column":23},"end":{"line":152,"column":45}},{"start":{"line":152,"column":49},"end":{"line":152,"column":74}}]}},"code":["(function () { YUI.add('gallery-sm-editor-format', function (Y, NAME) {","","/*jshint expr:true, onevar:false */","","/**","Provides the `Editor.Format` extension.","","@module gallery-sm-editor","@submodule gallery-sm-editor-format","**/","","/**","Extension for `Editor.Base` that provides formatting support for editor output","","@class Editor.Format","@extends Base","@extensionfor Editor.Base","**/","","(function () {","","var doc = Y.config.doc,","    EDOM = Y.Editor.DOM,","    STYLENODE = '<span></span>';","","var EditorFormat = Y.Base.create('editorFormat', Y.Base, [], {","    // -- Public Properties ----------------------------------------------------","","","    // -- Lifecycle ------------------------------------------------------------","","    initializer: function () {","        this.supportedStyles = [];","","        Y.Object.each(this.styleCommands, function (cmd) {","            this.supportedStyles.push(cmd.style.property);","        }, this);","    },","","","    // -- Protected Methods ----------------------------------------------------","","    /**","    Reformats html to the proper style","","    TODO: put this in its own extension.  doesn't belong here.","","    @method _formatHTML","    @param {HTML} html HTML string to format","    @return {Node} Node instance containing a document fragment with the","        formatted _html_","    @protected","    **/","    _formatHTML: function (html) {","        function flatten (node) {","            var childNodes = node.get('childNodes')._nodes;","","            Y.Array.each(childNodes.reverse(), function (node) {","                var parentNode;","","                node = Y.one(node);","                parentNode = node.get('parentNode');","","                if (EDOM.isTextNode(node)) {","                    if (this._isBlockNode(parentNode)) {","                        node.wrap(STYLENODE);","                    } else if (node.get('previousSibling')) {","                        EDOM.split(parentNode, node);","                    }","                } else {","                    // TODO: replace b, em, i, strong, u nodes with spans","                    if (!node.test(this.supportedTags)) {","                        node.replace(node.get('text'));","                    } else if (!this._isBlockNode(parentNode) && !parentNode.test('a')) {","                        parentNode.insert(node, 'after');","","                        if (!this._isBlockNode(node)) {","                            node.addClass(parentNode.get('className'));","","                            EDOM.copyStyles(parentNode, node, this.supportedStyles, {","                                explicit: true,","                                overwrite: false","                            });","                        }","                    } else {","                        // TODO: clear styles on containers","                    }","","                    flatten.call(this, node);","","                    if (EDOM.isEmptyNode(node)) {","                        node.remove(true);","                    }","","                    node.removeAttribute('id');","                }","            }, this);","        }","","        var frag = Y.one(doc.createDocumentFragment()).setHTML(html);","","        flatten.call(this, frag);","","        return frag;","    },","","","    /**","    Getter for the `html` attribute.","","    @method _getHTML","    @param {HTML} value HTML.","    @return {HTML} HTML.","    @protected","    **/","    _getHTML: function (value) {","        value = Y.Editor.Base.prototype._getHTML.call(this, value);","","        return this.get('formatFn')(value).getHTML();","    },","","","    /**","    Returns true if the given node is a container element, false otherwise","    A container element is defined as a non-inline element","","    @method _isBlockNode","    @param {HTMLNode|Node} node","    @return {Boolean} true if the given node is a container element, false otherwise","    @protected","    **/","    _isBlockNode: function (node) {","        node = Y.one(node);","","        // isElementNode() will exclude document fragments, which are valid","        // containers, use !isTextNode() instead","        return !EDOM.isTextNode(node) && (node.get('nodeName') === '#document-fragment' || node.test(this.blockTags));","    },","","","    /**","    Returns true if the given node is an inline element node, false otherwise","","    @method _isStyleNode","    @param {HTMLNode|Node} node","    @return {Boolean} true if the given node is an inline element node, false otherwise","    @protected","    **/","    _isStyleNode: function (node) {","        node = Y.one(node);","","        return node && !EDOM.isTextNode(node) && node.test(this.styleTags);","    },","","","    /**","    Setter for the `html` attribute.","","    @method _setHTML","    @param {HTML} value HTML.","    @return {HTML} HTML.","    @protected","    **/","    _setHTML: function (value) {","        value = this.get('formatFn')(value).getHTML();","","        return Y.Editor.Base.prototype._setHTML.call(this, value);","    }","}, {","    ATTRS: {","        /**","        Function for formatting editor html","","        One day allow custom formatting. Today is not that day.","","        @attribute {Function}","        @readOnly","        **/","        formatFn: {","            readOnly: true,","            setter: function (val) {","                return Y.bind(val, this);","            },","            validator: Y.Lang.isFunction,","            valueFn: function () {","                return this._formatHTML;","            }","        }","    }","});","","Y.namespace('Editor').Format = EditorFormat;","","}());","","","}, '@VERSION@', {\"requires\": [\"base-build\", \"gallery-sm-editor-base\", \"gallery-sm-editor-dom\", \"node-base\"]});","","}());"]};
}
var __cov_7KjWsoRaS3w4Kut5c5ilfA = __coverage__['build/gallery-sm-editor-format/gallery-sm-editor-format.js'];
__cov_7KjWsoRaS3w4Kut5c5ilfA.s['1']++;YUI.add('gallery-sm-editor-format',function(Y,NAME){__cov_7KjWsoRaS3w4Kut5c5ilfA.f['1']++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['2']++;(function(){__cov_7KjWsoRaS3w4Kut5c5ilfA.f['2']++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['3']++;var doc=Y.config.doc,EDOM=Y.Editor.DOM,STYLENODE='<span></span>';__cov_7KjWsoRaS3w4Kut5c5ilfA.s['4']++;var EditorFormat=Y.Base.create('editorFormat',Y.Base,[],{initializer:function(){__cov_7KjWsoRaS3w4Kut5c5ilfA.f['3']++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['5']++;this.supportedStyles=[];__cov_7KjWsoRaS3w4Kut5c5ilfA.s['6']++;Y.Object.each(this.styleCommands,function(cmd){__cov_7KjWsoRaS3w4Kut5c5ilfA.f['4']++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['7']++;this.supportedStyles.push(cmd.style.property);},this);},_formatHTML:function(html){__cov_7KjWsoRaS3w4Kut5c5ilfA.f['5']++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['8']++;function flatten(node){__cov_7KjWsoRaS3w4Kut5c5ilfA.f['6']++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['9']++;var childNodes=node.get('childNodes')._nodes;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['10']++;Y.Array.each(childNodes.reverse(),function(node){__cov_7KjWsoRaS3w4Kut5c5ilfA.f['7']++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['11']++;var parentNode;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['12']++;node=Y.one(node);__cov_7KjWsoRaS3w4Kut5c5ilfA.s['13']++;parentNode=node.get('parentNode');__cov_7KjWsoRaS3w4Kut5c5ilfA.s['14']++;if(EDOM.isTextNode(node)){__cov_7KjWsoRaS3w4Kut5c5ilfA.b['1'][0]++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['15']++;if(this._isBlockNode(parentNode)){__cov_7KjWsoRaS3w4Kut5c5ilfA.b['2'][0]++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['16']++;node.wrap(STYLENODE);}else{__cov_7KjWsoRaS3w4Kut5c5ilfA.b['2'][1]++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['17']++;if(node.get('previousSibling')){__cov_7KjWsoRaS3w4Kut5c5ilfA.b['3'][0]++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['18']++;EDOM.split(parentNode,node);}else{__cov_7KjWsoRaS3w4Kut5c5ilfA.b['3'][1]++;}}}else{__cov_7KjWsoRaS3w4Kut5c5ilfA.b['1'][1]++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['19']++;if(!node.test(this.supportedTags)){__cov_7KjWsoRaS3w4Kut5c5ilfA.b['4'][0]++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['20']++;node.replace(node.get('text'));}else{__cov_7KjWsoRaS3w4Kut5c5ilfA.b['4'][1]++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['21']++;if((__cov_7KjWsoRaS3w4Kut5c5ilfA.b['6'][0]++,!this._isBlockNode(parentNode))&&(__cov_7KjWsoRaS3w4Kut5c5ilfA.b['6'][1]++,!parentNode.test('a'))){__cov_7KjWsoRaS3w4Kut5c5ilfA.b['5'][0]++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['22']++;parentNode.insert(node,'after');__cov_7KjWsoRaS3w4Kut5c5ilfA.s['23']++;if(!this._isBlockNode(node)){__cov_7KjWsoRaS3w4Kut5c5ilfA.b['7'][0]++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['24']++;node.addClass(parentNode.get('className'));__cov_7KjWsoRaS3w4Kut5c5ilfA.s['25']++;EDOM.copyStyles(parentNode,node,this.supportedStyles,{explicit:true,overwrite:false});}else{__cov_7KjWsoRaS3w4Kut5c5ilfA.b['7'][1]++;}}else{__cov_7KjWsoRaS3w4Kut5c5ilfA.b['5'][1]++;}}__cov_7KjWsoRaS3w4Kut5c5ilfA.s['26']++;flatten.call(this,node);__cov_7KjWsoRaS3w4Kut5c5ilfA.s['27']++;if(EDOM.isEmptyNode(node)){__cov_7KjWsoRaS3w4Kut5c5ilfA.b['8'][0]++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['28']++;node.remove(true);}else{__cov_7KjWsoRaS3w4Kut5c5ilfA.b['8'][1]++;}__cov_7KjWsoRaS3w4Kut5c5ilfA.s['29']++;node.removeAttribute('id');}},this);}__cov_7KjWsoRaS3w4Kut5c5ilfA.s['30']++;var frag=Y.one(doc.createDocumentFragment()).setHTML(html);__cov_7KjWsoRaS3w4Kut5c5ilfA.s['31']++;flatten.call(this,frag);__cov_7KjWsoRaS3w4Kut5c5ilfA.s['32']++;return frag;},_getHTML:function(value){__cov_7KjWsoRaS3w4Kut5c5ilfA.f['8']++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['33']++;value=Y.Editor.Base.prototype._getHTML.call(this,value);__cov_7KjWsoRaS3w4Kut5c5ilfA.s['34']++;return this.get('formatFn')(value).getHTML();},_isBlockNode:function(node){__cov_7KjWsoRaS3w4Kut5c5ilfA.f['9']++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['35']++;node=Y.one(node);__cov_7KjWsoRaS3w4Kut5c5ilfA.s['36']++;return(__cov_7KjWsoRaS3w4Kut5c5ilfA.b['9'][0]++,!EDOM.isTextNode(node))&&((__cov_7KjWsoRaS3w4Kut5c5ilfA.b['9'][1]++,node.get('nodeName')==='#document-fragment')||(__cov_7KjWsoRaS3w4Kut5c5ilfA.b['9'][2]++,node.test(this.blockTags)));},_isStyleNode:function(node){__cov_7KjWsoRaS3w4Kut5c5ilfA.f['10']++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['37']++;node=Y.one(node);__cov_7KjWsoRaS3w4Kut5c5ilfA.s['38']++;return(__cov_7KjWsoRaS3w4Kut5c5ilfA.b['10'][0]++,node)&&(__cov_7KjWsoRaS3w4Kut5c5ilfA.b['10'][1]++,!EDOM.isTextNode(node))&&(__cov_7KjWsoRaS3w4Kut5c5ilfA.b['10'][2]++,node.test(this.styleTags));},_setHTML:function(value){__cov_7KjWsoRaS3w4Kut5c5ilfA.f['11']++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['39']++;value=this.get('formatFn')(value).getHTML();__cov_7KjWsoRaS3w4Kut5c5ilfA.s['40']++;return Y.Editor.Base.prototype._setHTML.call(this,value);}},{ATTRS:{formatFn:{readOnly:true,setter:function(val){__cov_7KjWsoRaS3w4Kut5c5ilfA.f['12']++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['41']++;return Y.bind(val,this);},validator:Y.Lang.isFunction,valueFn:function(){__cov_7KjWsoRaS3w4Kut5c5ilfA.f['13']++;__cov_7KjWsoRaS3w4Kut5c5ilfA.s['42']++;return this._formatHTML;}}}});__cov_7KjWsoRaS3w4Kut5c5ilfA.s['43']++;Y.namespace('Editor').Format=EditorFormat;}());},'@VERSION@',{'requires':['base-build','gallery-sm-editor-base','gallery-sm-editor-dom','node-base']});
