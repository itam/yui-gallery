YUI.add("gallery-sm-editor-style",function(e,t){(function(){var t=e.Editor.DOM,n=e.Base.create("editorStyle",e.Base,[],{styleCommands:{bold:{property:"fontWeight",valueOn:"bold",valueOff:"normal"},fontName:{property:"fontFamily"},fontSize:{property:"fontSize"},italic:{property:"fontStyle",valueOn:"italic",valueOff:"normal"},underline:{property:"textDecoration",valueOn:"underline",valueOff:"none"}},bold:function(){return this.command("bold","toggle"),this},italic:function(){return this.command("italic","toggle"),this},styles:function(e){var t={},n;if(e)for(n in e)e.hasOwnProperty(n)&&(t[n]=this.command(n,e[n]));else{var r=this.styleCommands;for(n in r)r.hasOwnProperty(n)&&(t[n]=this._queryCommandValue(n))}return t},underline:function(){return this.command("underline","toggle"),this},_cleanRange:function(n,r){function o(t){return e.Object.some(s,function(e){return""!==t._node.style[e.property]})}function u(n){if(!t.isElementNode(n))return;""===n.get("text")?n.remove(!0):(e.Array.each(r,function(e){n.setStyle(e,"")}),n.get("children").each(u),o(n)||t.unwrap(n))}var i=n.parentNode(),s=this.styleCommands;return r=e.Array(r),i.get("children").each(u),o(i)?n.selectNodeContents(i):n=t.unwrap(i),n},_execCommand:function(n,r){var i=this.styleCommands[n],s=this.selection.range(),o,u;if(!i)return e.Editor.Base.prototype._execCommand.call(this,n,r);if(!s)return;o=t.getAncestorElement(s.parentNode()),o!==this._inputNode&&o.get("text")===s.toString()?u=o:u=s.wrap("<span>"),this.boolCommands[n]&&(this._queryCommandValue(n)?r=this._getStyledAncestor(u,i.property)?i.valueOff:"":r=i.valueOn||r),u.setStyle(i.property,r),s.selectNodeContents(u),s=this._cleanRange(s,i.property),this.selection.select(s)},_getStyledAncestor:function(e,n,r){return e.ancestor(function(e){return t.isElementNode(e)?!!e._node.style[n]:!1},r,this.selectors.input)},_queryCommandValue:function(n){var r=this.styleCommands[n],i=this.selection.range(),s,o,u;return r?(i&&(s=i.shrink().parentNode(),o=this._getStyledAncestor(s,r.property,!0),o||(o=t.getAncestorElement(s)),u=o.getStyle(r.property),this.boolCommands[n]&&(u=u===r.valueOn)),u):e.Editor.Base.prototype._queryCommandValue.call(this,n)}});e.namespace("Editor").Style=n})()},"@VERSION@",{requires:["gallery-sm-editor-base","gallery-sm-editor-dom","node-style"]});
